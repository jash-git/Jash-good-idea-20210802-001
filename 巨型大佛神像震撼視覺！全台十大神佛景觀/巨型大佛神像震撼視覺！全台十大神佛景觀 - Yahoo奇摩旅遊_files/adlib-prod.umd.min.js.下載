/*!
 * Version: 1.0.15, Build: 12218790, Time: 2020-06-17T02:57:51.598Z
 */

!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).__adlib=t()}(this,(function(){"use strict";function e(t){return(e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(t)}function t(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function r(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function n(e){for(var n=1;n<arguments.length;n++){var o=null!=arguments[n]?arguments[n]:{};n%2?r(Object(o),!0).forEach((function(r){t(e,r,o[r])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(o)):r(Object(o)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(o,t))}))}return e}function o(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if("undefined"==typeof Symbol||!(Symbol.iterator in Object(e)))return;var r=[],n=!0,o=!1,c=void 0;try{for(var i,u=e[Symbol.iterator]();!(n=(i=u.next()).done)&&(r.push(i.value),!t||r.length!==t);n=!0);}catch(e){o=!0,c=e}finally{try{n||null==u.return||u.return()}finally{if(o)throw c}}return r}(e,t)||function(e,t){if(!e)return;if("string"==typeof e)return c(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);"Object"===r&&e.constructor&&(r=e.constructor.name);if("Map"===r||"Set"===r)return Array.from(e);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(e,t)}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var i=function(e,t){return e(t={exports:{}},t.exports),t.exports}((function(e){e.exports=function(){for(var e,t="__tcfapiLocator",r=[],n=window;n;){try{if(n.frames[t]){e=n;break}}catch(e){}if(n===window.top)break;n=n.parent}e||(function e(){var r=n.document,o=!!n.frames[t];if(!o)if(r.body){var c=r.createElement("iframe");c.style.cssText="display:none",c.name=t,r.body.appendChild(c)}else setTimeout(e,5);return!o}(),n.__tcfapi=function(){for(var e,t=arguments.length,n=new Array(t),o=0;o<t;o++)n[o]=arguments[o];if(!n.length)return r;if("setGdprApplies"===n[0])n.length>3&&2===parseInt(n[1],10)&&"boolean"==typeof n[3]&&(e=n[3],"function"==typeof n[2]&&n[2]("set",!0));else if("ping"===n[0]){var c={gdprApplies:e,cmpLoaded:!1,cmpStatus:"stub"};"function"==typeof n[2]&&n[2](c)}else r.push(n)},n.addEventListener("message",(function(e){var t="string"==typeof e.data,r={};try{r=t?JSON.parse(e.data):e.data}catch(e){}var n=r.__tcfapiCall;n&&window.__tcfapi(n.command,n.version,(function(r,o){var c={__tcfapiReturn:{returnValue:r,success:o,callId:n.callId}};t&&(c=JSON.stringify(c)),e.source.postMessage(c,"*")}),n.parameter)}),!1))}})),u=function(e,t,r,n){var o=n.debug,c=void 0!==o&&o,i=n.isV2,u=void 0!==i&&i,s=n.timeout,a=void 0===s?3e3:s,f=function(e){for(var t=arguments.length,r=new Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];var o=r.reduce((function(e,t){return e+"["+String(t)+"]"}),""),c=function(t){if(e){for(var r,n=arguments.length,c=new Array(n>1?n-1:0),i=1;i<n;i++)c[i-1]=arguments[i];(r=console.log).call.apply(r,[null,"".concat(o," ").concat(t)].concat(c))}};return{log:c}}(c,e,t,r);if("function"!=typeof window[e])return f.log("please check your cmp.js version"),Promise.reject(new Error("please check your cmp.js version"));var l=!1;return new Promise((function(n,o){var c=setTimeout((function(){l=!0,f.log("timedout"),o(new Error("timedout"))}),a);window[e](t,r,(function(e,r){if(!l)if(clearTimeout(c),f.log("receive response",e,r),u){var i=e.cmpStatus,s=e.eventStatus;if(!r||"error"===i||"cmpuishown"===s)return void o(new Error("invalid response"));if("tcloaded"===s||"useractioncomplete"===s)return void n(e);f.log("cmp error",t,e),o(new Error("invalid response, unknown error"))}else r?n(e):o(new Error("invalid response"))}))}))},s=function(e){return u("__tcfapi","getTCData",2,n(n({},e),{},{isV2:!0})).then((function(e){var t=e.gdprApplies,r=e.tcString,n=e.vendor,o=(void 0===n?{}:n).consents,c=null;return o&&"boolean"==typeof o[77]&&(c=o[77]),{comscoreConsent:c,success:!0,tcString:r,gdprApplies:t}})).catch((function(e){return{success:!1}}))},a=function(e){return u("__cmp","getVendorConsents",1,e).then((function(e){var t=e.gdprApplies,r=e.vendorConsents,n=null;return r&&"boolean"==typeof r[77]&&(n=r[77]),{comscoreConsent:n,success:!0,gdprApplies:t}})).catch((function(e){return{success:!1}}))},f=function(e){return Promise.all([a(e),s(e)]).then((function(e){var t=o(e,2),r=t[0],n=t[1];return n.success?n:r})).catch((function(e){return{success:!1}}))},l=function(e){return u("__uspapi","getDoNotSell",1,e).then((function(e){var t=e.doNotSell;return"boolean"==typeof t?t:null})).catch((function(e){return null}))},p=function(e){return Promise.all([l(e),f(e)]).then((function(e){var t=o(e,2),r=t[0],n=t[1],c=null;if("boolean"==typeof r&&(c=r?0:1),0!==c){var i=n.comscoreConsent,u=n.gdprApplies;n.success&&u&&(c=i?1:0)}var s=null,a=null,f=n.gdprApplies,l=n.tcString;return l&&(s=f?1:0,a=l),{gdpr:s,gdprConsent:a,ucfr:c}}))};return{fireComscoreBeacon:function(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i(),"object"===e(t)&&0!==Object.keys(t)){var o=r.timeout,c=void 0===o?2e3:o,u=r.debug,s=void 0!==u&&u;return p({timeout:c,debug:s}).then((function(e){var r,o,c=e.gdpr,i=e.gdprConsent,u=e.ucfr,s=n({},t);0!==u&&1!==u||(s.cs_ucfr=u),i&&(s.gdpr=c,s.gdpr_consent=i),window._comscore=window._comscore||[],window._comscore.push(s),r=document.createElement("script"),o=document.getElementsByTagName("script")[0],r.async=!0,r.src="https://s.yimg.com/lq/lib/3pm/cs_0.2.js",o.parentNode.insertBefore(r,o)})).catch((function(e){console.log("fireComscoreBeacon failed",e)}))}}}}));
